"""Build ping test"""
import os

def scons():
    """Scons function"""

    Import('env prereqs')

    tenv = env.Clone()
    tenv.Prepend(CPPPATH=['../common/include'])
    prereqs.require(tenv, "pmix", "mercury")
    common = tenv.Object('my_rpc_common')

    progs = tenv.Program(['test_rpc_client.c', common],
                         LIBS=['$LIBS', 'proto_common'],
                         LIBPATH=['$LIBPATH', '../common'])
    progs += tenv.Program(['test_rpc_server.c', common])

    tenv.Install(os.path.join("$PREFIX", 'bin'), progs)
    tenv.Append(RPATH=os.path.join("$PREFIX", 'lib'))

if __name__ == "SCons.Script":
    scons()

